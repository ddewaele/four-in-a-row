<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Connect Four</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Outfit:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Main Menu Screen -->
    <div class="screen main-menu-screen active" id="main-menu-screen">
        <div class="menu-container">
            <h1 class="menu-title">Connect<span class="four">4</span></h1>
            <p class="menu-subtitle">Choose your game mode</p>
            <div class="menu-buttons">
                <button class="btn btn-menu btn-local" id="btn-local-game">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                        <circle cx="9" cy="7" r="4"/>
                        <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                    </svg>
                    Local 2 Player
                    <span class="btn-desc">Play on the same device</span>
                </button>
                <button class="btn btn-menu btn-online" id="btn-online-game">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="2" y1="12" x2="22" y2="12"/>
                        <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                    </svg>
                    Play Online
                    <span class="btn-desc">Challenge other players</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Login Screen (Online Mode) -->
    <div class="screen login-screen" id="login-screen">
        <div class="login-container">
            <button class="btn btn-back" id="btn-back-to-menu">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m15 18-6-6 6-6"/>
                </svg>
                Back
            </button>
            <h1 class="login-title">Enter Your Name</h1>
            <form class="login-form" id="login-form">
                <input type="text" class="login-input" id="username-input" placeholder="Your nickname" maxlength="20" autocomplete="off" required>
                <button type="submit" class="btn btn-submit" id="btn-join-lobby">
                    Enter Lobby
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M5 12h14"/>
                        <path d="m12 5 7 7-7 7"/>
                    </svg>
                </button>
            </form>
        </div>
    </div>

    <!-- Lobby Screen -->
    <div class="screen lobby-screen" id="lobby-screen">
        <div class="lobby-container">
            <div class="lobby-header">
                <button class="btn btn-back" id="btn-back-to-login">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                        <path d="m15 18-6-6 6-6"/>
                    </svg>
                    Back
                </button>
                <h1 class="lobby-title">Game Lobby</h1>
                <div class="lobby-username">
                    <span class="username-label">Playing as:</span>
                    <span class="username-value" id="display-username">Player</span>
                </div>
            </div>
            <div class="lobby-actions">
                <button class="btn btn-create-game" id="btn-create-game">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 5v14"/>
                        <path d="M5 12h14"/>
                    </svg>
                    Create New Game
                </button>
            </div>
            <div class="games-list-container">
                <h2 class="games-list-title">Available Games</h2>
                <div class="games-list" id="games-list">
                    <div class="games-empty" id="games-empty">
                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M8 12h8"/>
                        </svg>
                        <p>No games available</p>
                        <span>Create a new game to start playing!</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Waiting Screen -->
    <div class="screen waiting-screen" id="waiting-screen">
        <div class="waiting-container">
            <button class="btn btn-back" id="btn-cancel-waiting">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m15 18-6-6 6-6"/>
                </svg>
                Cancel
            </button>
            <div class="waiting-content">
                <div class="waiting-spinner">
                    <div class="spinner-chip red"></div>
                    <div class="spinner-chip yellow"></div>
                </div>
                <h1 class="waiting-title">Waiting for Opponent</h1>
                <p class="waiting-subtitle">Share this game code with a friend:</p>
                <div class="game-code-box">
                    <span class="game-code" id="game-code">ABC123</span>
                    <button class="btn btn-copy" id="btn-copy-code" title="Copy code">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
                            <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Screen -->
    <div class="screen game-screen" id="game-screen">
        <div class="game-container">
            <header class="game-header">
                <div class="game-header-top">
                    <button class="btn btn-back btn-leave-game" id="btn-leave-game">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                            <path d="m15 18-6-6 6-6"/>
                        </svg>
                        Leave
                    </button>
                    <h1 class="game-title">Connect<span class="four">4</span></h1>
                    <div class="connection-status" id="connection-status">
                        <span class="status-dot"></span>
                        <span class="status-text">Connected</span>
                    </div>
                </div>
                <div class="score-board">
                    <div class="player-score player-1-score">
                        <div class="score-chip red"></div>
                        <span class="score-name" id="player-1-name">Player 1</span>
                        <span class="score-value" id="score-1">0</span>
                    </div>
                    <div class="score-divider">VS</div>
                    <div class="player-score player-2-score">
                        <div class="score-chip yellow"></div>
                        <span class="score-name" id="player-2-name">Player 2</span>
                        <span class="score-value" id="score-2">0</span>
                    </div>
                </div>
            </header>

            <div class="turn-indicator">
                <div class="turn-chip" id="turn-chip"></div>
                <span class="turn-text" id="turn-text">Player 1's Turn</span>
            </div>

            <div class="board-wrapper">
                <div class="board-frame">
                    <div class="column-indicators" id="column-indicators"></div>
                    <div class="game-board" id="game-board"></div>
                </div>
                <div class="board-stand"></div>
            </div>

            <div class="game-controls">
                <button class="btn btn-reset" id="reset-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                        <path d="M3 3v5h5"/>
                    </svg>
                    New Game
                </button>
                <button class="btn btn-reset-scores" id="reset-scores-btn">
                    Reset Scores
                </button>
            </div>

            <div class="win-overlay" id="win-overlay">
                <div class="win-modal">
                    <div class="win-chip" id="win-chip"></div>
                    <h2 class="win-title" id="win-title">Player 1 Wins!</h2>
                    <p class="win-subtitle">Connect Four!</p>
                    <div class="win-buttons">
                        <button class="btn btn-play-again" id="play-again-btn">Play Again</button>
                        <button class="btn btn-leave-after-win" id="btn-leave-after-win">Leave Game</button>
                    </div>
                </div>
            </div>

            <div class="draw-overlay" id="draw-overlay">
                <div class="draw-modal">
                    <h2 class="draw-title">It's a Draw!</h2>
                    <p class="draw-subtitle">The board is full</p>
                    <div class="draw-buttons">
                        <button class="btn btn-play-again" id="draw-play-again-btn">Play Again</button>
                        <button class="btn btn-leave-after-draw" id="btn-leave-after-draw">Leave Game</button>
                    </div>
                </div>
            </div>

            <div class="rematch-overlay" id="rematch-overlay">
                <div class="rematch-modal">
                    <h2 class="rematch-title">Rematch Requested</h2>
                    <p class="rematch-subtitle" id="rematch-subtitle">Opponent wants a rematch!</p>
                    <div class="rematch-buttons">
                        <button class="btn btn-accept-rematch" id="btn-accept-rematch">Accept</button>
                        <button class="btn btn-decline-rematch" id="btn-decline-rematch">Decline</button>
                    </div>
                </div>
            </div>

            <div class="opponent-left-overlay" id="opponent-left-overlay">
                <div class="opponent-left-modal">
                    <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                        <polyline points="16,17 21,12 16,7"/>
                        <line x1="21" y1="12" x2="9" y2="12"/>
                    </svg>
                    <h2 class="opponent-left-title">Opponent Left</h2>
                    <p class="opponent-left-subtitle">Your opponent has disconnected</p>
                    <button class="btn btn-back-to-lobby" id="btn-back-to-lobby">Back to Lobby</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="game.js"></script>
</body>
</html>
